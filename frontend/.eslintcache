[{"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\index.js":"1","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\App.js":"2","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\utils\\utils.js":"3","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\utils\\AppContext.js":"4","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\user.service.js":"5","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\Login\\Login.js":"6","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\HomePage\\Homepage.js":"7","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\Register\\Register.js":"8","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\auth-header.js":"9","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\auth.service.js":"10","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Header\\Header.js":"11","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\OTPComfirm\\OTP.js":"12","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Footer\\Footer.js":"13","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Products\\Products.js":"14"},{"size":424,"mtime":1612452867551,"results":"15","hashOfConfig":"16"},{"size":3031,"mtime":1612502909849,"results":"17","hashOfConfig":"16"},{"size":1310,"mtime":1610909721558,"results":"18","hashOfConfig":"16"},{"size":145,"mtime":1611052635055,"results":"19","hashOfConfig":"16"},{"size":719,"mtime":1610907888359,"results":"20","hashOfConfig":"16"},{"size":5295,"mtime":1612525000632,"results":"21","hashOfConfig":"16"},{"size":1048,"mtime":1612524739916,"results":"22","hashOfConfig":"16"},{"size":5980,"mtime":1612454208788,"results":"23","hashOfConfig":"16"},{"size":277,"mtime":1610908324046,"results":"24","hashOfConfig":"16"},{"size":805,"mtime":1612454289146,"results":"25","hashOfConfig":"16"},{"size":3892,"mtime":1612524460080,"results":"26","hashOfConfig":"16"},{"size":6537,"mtime":1612459223444,"results":"27","hashOfConfig":"16"},{"size":2610,"mtime":1612524965070,"results":"28","hashOfConfig":"16"},{"size":19251,"mtime":1612524912386,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"1iupehj",{"filePath":"33","messages":"34","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"32"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"32"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\index.js",[],["61","62"],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\App.js",["63","64","65","66"],"import \"antd/dist/antd.css\";\r\nimport \"./assets/css/global.scss\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Login from \"./modules/page/Login/Login\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport HomePage from \"./modules/page/HomePage/Homepage\";\r\n\r\nimport Register from \"./modules/page/Register/Register\";\r\n// import AuthService from \"./services/auth.service\";\r\nimport AppContext from \"./utils/AppContext\";\r\nimport { parseAccessToken } from \"./utils/utils\";\r\nimport UserService from \"./services/user.service\";\r\nimport HeaderCustomize from \"./modules/components/Header/Header\";\r\n\r\nconst App = () => {\r\n  // const { token,setToken } = useToken();\r\n  const [currentUser, setCurrentUser] = useState(undefined);\r\n  const [nameUser, setnameUser] = useState(undefined);\r\n  const [checkOTPConfim, setCheckOTPConfim] = useState(undefined);\r\n\r\n  const [checkLocalStorage, setCheckLocalStorage] = useState(false);\r\n  // console.log(checkLocalStorage)\r\n  const saveToken = (userToken) => {\r\n    // dùng để lưu token khi đăng nhập\r\n    localStorage.setItem(\"AcademyOnline_Token\", JSON.stringify(userToken));\r\n  };\r\n  const history = useHistory();\r\n\r\n  // console.log(checkOTPConfim);\r\n  useEffect(() => {\r\n    // dùng để lấy token trên local\r\n    const tokenString = localStorage.getItem(\"AcademyOnline_Token\");\r\n    if (tokenString) {\r\n      const userID = parseAccessToken(tokenString); // lấy trường accessToken đi mã hoá và lấy ID\r\n      console.log(userID);\r\n      setnameUser(userID.Dislayname);\r\n      if (userID.OTP_Confim.data[0] === 1) {\r\n        setCheckOTPConfim(true);\r\n      } else {\r\n        setCheckOTPConfim(false);\r\n      }\r\n      setCheckLocalStorage(true);\r\n\r\n      // UserService(userID,useraccessToken).getUserBoard().then((result) => {\r\n      //   console.log(result.data.Dislayname)\r\n      //   setnameUser(result.data.Dislayname)\r\n      // }).catch((err) => {\r\n      //   console.log(err)\r\n\r\n      // });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        nameUser,\r\n        checkLocalStorage,\r\n        checkOTPConfim,\r\n        setnameUser,\r\n        saveToken,\r\n        setCurrentUser,\r\n        setCheckLocalStorage,\r\n        setCheckOTPConfim,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Switch>\r\n          <Route path=\"/\" component={HomePage} exact></Route>\r\n          <Route path=\"/profile\" exact></Route>\r\n\r\n          {checkLocalStorage ? (\r\n            <></>\r\n          ) : (\r\n            <>\r\n              <Route path=\"/login\"exact component={Login}></Route>\r\n              <Route path=\"/register\" exact component={Register} ></Route>\r\n            </>\r\n          )}\r\n\r\n          <Route path=\"*\" exact component={HomePage}></Route>\r\n        </Switch>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n// {token ?\"\": <Route path=\"/login\" component={Login} ></Route>}\r\n//         {token ?\"\":  <Route path=\"/register\" component={Login}></Route>}\r\n","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\utils\\utils.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\utils\\AppContext.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\user.service.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\Login\\Login.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\HomePage\\Homepage.js",["67"],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\Register\\Register.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\auth-header.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\services\\auth.service.js",[],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Header\\Header.js",["68","69","70"],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\page\\OTPComfirm\\OTP.js",["71","72"],"import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Modal, Form, InputNumber, Button, message } from \"antd\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport AuthService from \"../../../services/auth.service\";\r\nimport { parseAccessToken } from \"../../../utils/utils\";\r\nimport AppContext from \"../../../utils/AppContext\";\r\nimport { parseAccessToken_res } from \"../../../utils/utils\";\r\n\r\nconst OTP = () => {\r\n  const [form] = Form.useForm();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const { from } = location.state || { from: { pathname: \"/\" } };\r\n\r\n  const {\r\n    setnameUser,\r\n    saveToken,\r\n    setCheckLocalStorage,\r\n    setCheckOTPConfim,\r\n  } = useContext(AppContext);\r\n  const [isModalVisible, setIsModalVisible] = useState(true);\r\n  const [confirmLoading, setConfirmLoading] = React.useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n  const [email, setemail] = useState(\"\");\r\n  const onCreate = (values) => {\r\n    if (\r\n      values.otp1 !== \"null\" &&\r\n      values.otp2 !== \"null\" &&\r\n      values.otp3 !== \"null\" &&\r\n      values.otp4 !== \"null\" &&\r\n      values.otp5 !== \"null\" &&\r\n      values.otp6\r\n    ) {\r\n      const OTP = `${values.otp1}${values.otp2}${values.otp3}${values.otp4}${values.otp5}${values.otp6}`;\r\n      const tokenString = localStorage.getItem(\"AcademyOnline_Token\");\r\n      const userID = parseAccessToken(tokenString);\r\n      console.log(userID)\r\n      AuthService()\r\n        .checkOTPDB(userID.Usersid, OTP)\r\n        .then((result) => {\r\n\r\n          if (result.data) {\r\n          console.log(result)\r\n            setConfirmLoading(true);\r\n            setnameUser(parseAccessToken_res(result.data).Dislayname);\r\n              saveToken(result.data);\r\n              if (parseAccessToken_res(result.data).OTP_Confim.data[0] === 1) {\r\n                setCheckOTPConfim(true);\r\n              } else {\r\n                setCheckOTPConfim(false);\r\n              }\r\n              setCheckLocalStorage(true);\r\n            setTimeout(() => {\r\n              setIsModalVisible(false);\r\n              setConfirmLoading(false);\r\n              message.success(\"Xác nhận OPT thành công\");\r\n              \r\n            }, 2000);\r\n\r\n          } else {\r\n            message.error(\"Mã OTP Không khớp\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      message.error(\"Vui lòng nhập đầy đủ số OTP\");\r\n    }\r\n  };\r\n\r\n  const inputfocus = (elmnt) => {\r\n    if (elmnt.key === \"Delete\" || elmnt.key === \"Backspace\") {\r\n      const next = elmnt.target.tabIndex - 2;\r\n      if (next > -1) {\r\n        elmnt.target.form.elements[next].focus();\r\n      }\r\n    } else {\r\n      const next = elmnt.target.tabIndex;\r\n      if (next < 6) {\r\n        elmnt.target.form.elements[next].focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (timeLeft === 0) {\r\n      setTimeLeft(null);\r\n    }\r\n\r\n    if (!timeLeft) return;\r\n    const intervalId = setInterval(() => {\r\n      setTimeLeft(timeLeft - 1);\r\n    }, 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [timeLeft]);\r\n\r\n  const resetOTP = () => {\r\n    setTimeLeft(60);\r\n    const tokenString = localStorage.getItem(\"AcademyOnline_Token\");\r\n    const userID = parseAccessToken(tokenString);\r\n    AuthService()\r\n      .updateOTP(userID.Usersid)\r\n      .then((result) => {\r\n        setemail(result.data);\r\n        console.log(result);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  return (\r\n    <Modal\r\n      visible={isModalVisible}\r\n      title=\"Vui lòng xác thực OTP để có thể sử dụng\"\r\n      okText=\"Xác Thực\"\r\n      cancelButtonProps={{ style: { display: \"none\" } }}\r\n      confirmLoading={confirmLoading}\r\n      closable={false}\r\n      width={590}\r\n      onOk={() => {\r\n        form\r\n          .validateFields()\r\n          .then((values) => {\r\n            onCreate(values);\r\n          })\r\n          .catch((info) => {\r\n            console.log(\"Validate Failed:\", info);\r\n          });\r\n      }}\r\n    >\r\n      <div>\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          name=\"form_in_modal\"\r\n          initialValues={{\r\n            modifier: \"public\",\r\n          }}\r\n        >\r\n          <Form.Item name=\"otp1\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"1\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"otp2\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"2\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"otp3\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"3\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"otp4\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"4\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"otp5\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"5\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"otp6\" className=\"otpInput\">\r\n            <InputNumber\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              tabIndex=\"6\"\r\n              maxLength=\"1\"\r\n              min={0}\r\n              onKeyUp={(e) => inputfocus(e)}\r\n            />\r\n          </Form.Item>\r\n        </Form>\r\n        <Button type=\"primary\" className=\"mb-3\" onClick={() => resetOTP()}>\r\n          Lấy lại mã OTP\r\n        </Button>\r\n        <br/>\r\n        <h5 >\r\n          {timeLeft\r\n            ? `Đã gửi mã đến email ${email} - vui lòng xác thực trong ${timeLeft}s`\r\n            : \"\"}\r\n        </h5>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default OTP;\r\n","C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Footer\\Footer.js",["73"],"C:\\Users\\HaToan\\Documents\\OnlineAcademy\\frontend\\src\\modules\\components\\Products\\Products.js",[],{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"78","severity":1,"message":"79","line":17,"column":8,"nodeType":"80","messageId":"81","endLine":17,"endColumn":19},{"ruleId":"78","severity":1,"message":"82","line":18,"column":8,"nodeType":"80","messageId":"81","endLine":18,"endColumn":23},{"ruleId":"78","severity":1,"message":"83","line":22,"column":10,"nodeType":"80","messageId":"81","endLine":22,"endColumn":21},{"ruleId":"78","severity":1,"message":"84","line":32,"column":9,"nodeType":"80","messageId":"81","endLine":32,"endColumn":16},{"ruleId":"78","severity":1,"message":"85","line":4,"column":29,"nodeType":"80","messageId":"81","endLine":4,"endColumn":37},{"ruleId":"78","severity":1,"message":"86","line":8,"column":9,"nodeType":"80","messageId":"81","endLine":8,"endColumn":15},{"ruleId":"78","severity":1,"message":"87","line":26,"column":9,"nodeType":"80","messageId":"81","endLine":26,"endColumn":17},{"ruleId":"78","severity":1,"message":"88","line":27,"column":9,"nodeType":"80","messageId":"81","endLine":27,"endColumn":23},{"ruleId":"78","severity":1,"message":"84","line":12,"column":9,"nodeType":"80","messageId":"81","endLine":12,"endColumn":16},{"ruleId":"78","severity":1,"message":"89","line":14,"column":11,"nodeType":"80","messageId":"81","endLine":14,"endColumn":15},{"ruleId":"90","severity":1,"message":"91","line":43,"column":19,"nodeType":"92","endLine":43,"endColumn":68},"no-native-reassign",["93"],"no-negated-in-lhs",["94"],"no-unused-vars","'UserService' is defined but never used.","Identifier","unusedVar","'HeaderCustomize' is defined but never used.","'currentUser' is assigned a value but never used.","'history' is assigned a value but never used.","'useState' is defined but never used.","'Search' is assigned a value but never used.","'onSearch' is assigned a value but never used.","'firstCharacter' is assigned a value but never used.","'from' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation"]